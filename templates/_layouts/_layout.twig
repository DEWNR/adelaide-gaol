{% set baseUrl = alias('@siteUrl') ~ '/' %}
{% set assetBaseUrl = baseUrl ~ 'assets/' %}
{% set assetBasePath = 'assets/' %}
{% header 'Link: <#{baseUrl}>; rel=dns-prefetch;,<#{baseUrl}; rel=preconnect; crossorigin;' %}
<!DOCTYPE html>
<html class="no-js" lang="{{ craft.app.language | slice(0, 2) }}" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">


    <head>
        <link rel="dns-prefetch" href="{{ baseUrl }}">
        <link rel="preconnect" href="{{ baseUrl }}" crossorigin>

        {# -- Misc header tags #}
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">

        <title>Adelaide Gaol</title>

        {# -- Any <link> tags that should be included in the header #}
        {% block _head_links %}{% endblock %}

        {% import "_macros" as utils %}
        {% include "_partials/_favicons" ignore missing %}

        {# -- ServiceWokrer, loadjs, and tiny-cookie #}
        <script>
            {% if craft.app.config.general.isSystemLive %}
                {{ source('_inlinejs/register-service-worker.min.js', ignore_missing = true)}}
            {% endif %}
            {{ source('_inlinejs/tiny-cookie.min.js')}}
            {{ source('_inlinejs/tab-handler.min.js')}}
        </script>



        {# -- Critical CSS #}
        {# -- Inline CSS block used by templates for Critical CSS #}
        {% block _inline_css %}{% endblock %}

        <link rel="preload" href="{{ rev('assets/css/main.css') }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="{{ rev('assets/css/main.css') }}"></noscript>

        <link rel="preload" href="//cdn.curator.io/3.1/css/curator.min.css" as="style" onload="this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="//cdn.curator.io/3.1/css/curator.min.css"></noscript>

        <script>
            {{ source('_inlinejs/loadCSS.min.js') }}
            {{ source('_inlinejs/cssrelpreload.min.js') }}
        </script>

        {% if not craft.app.config.general.devMode %}
            {# -- Google Analytics #}
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script',"{{ rev('assets/build/css/main.css')}}",'ga');ga('create','UA-21306566-1','auto');ga('require','displayfeatures');ga('send','pageview');
            </script>
        {% endif %}

        {# -- PictureFill polyfill #}
        <script>
            var testImg = document.createElement('img');
            if (!('srcset' in testImg) || !('sizes' in testImg)) {
                document.createElement('picture');
                var script = document.createElement('script');
                script.setAttribute('src', "{{ rev('assets/build/js/picturefill.min.js')}}");
                if ('async' in script) {
                    script.setAttribute('async', true)
                }
                document.head.appendChild(script);
            }
        </script>

        {# -- Site fonts #}
        <style>
            {% include "_inlinecss/_site_fonts.css" %}
        </style>

        {# -- FontFaceObserver #}
        <script>
            {{ source('_inlinejs/fontfaceobserver.min.js') }}
            {{ source('_inlinejs/asyncload-site-fonts.min.js') }}
        </script>

        {# -- Inline JS #}
        <script>
            var baseUrl = '{{ baseUrl }}';
            var retina = window.devicePixelRatio > 1;
        </script>

        {# -- </head> JS #}
        {% block _head_js %}{% endblock %}

    </head>

    {# -- HTML Body #}
    {# {{ entry.backgroundImage.one().getUrl() }} #}
{% if not entry.backgroundImage | length %}
    {% set background = craft.entries.section('homepage').one().backgroundImage.one().getUrl() %}
{% else %}
    {% set background = entry.backgroundImage.one().getUrl() %}
{% endif %}


    <body style="background-image: url({{ background }})">
        <a href="#main-content" id="skip-to-content" class="c-button c-button--secondary c-skip-to-content">Skip to content</a>

        <div id="page-container">

            {# -- Header, including _navbar #}
            {% include "_partials/_header" %}

            <div id="main-content" class="">
                <main>
                    {# -- Primary content block #}
                    {% block content %}{% endblock %}
                </main>
            </div>

            {# -- Content that appears below the primary content block #}
            {% block subcontent %}{% endblock %}

            {# -- Footer #}
            {% include "_partials/_footer" %}

        </div>

        <script src="//cdn.curator.io/3.1/js/curator.min.js"></script>

        {# -- Main JS #}
        <script async src="{{ rev('assets/js/main.js') }}"></script>

        {# -- Curator templates #}
        {% include "_partials/_curator-templates" %}

        {# -- Inline JS #}
        {% block _inline_js %}{% endblock %}


        {% if craft.app.config.general.devMode %}
            <script src="//localhost:443/browser-sync/browser-sync-client.js"></script>
        {% endif %}
    </body>
</html>
